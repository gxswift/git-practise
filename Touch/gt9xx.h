/*******************************************************************************
  * Company: Wang Electronic Technology Co., Ltd.
  ******************************************************************************
  * 文件名称：gt9xx.h
  * 功能说明：红龙103 GT910-7寸电容驱动头文件
  * 版    本：V1.0
	* 作    者：openmcu	
  * 日    期：2014-09-27
********************************************************************************
  * 文件名称：
  * 功能说明：
  * 版    本：
	* 更新作者:	
  * 日    期：
	* 更新内容：
********************************************************************************/

#ifndef __GT9XX_H__
#define __GT9XX_H__

#include "stm32f10x.h"
#define GTP_MAX_TOUCH         5

#define GT910_ADDR_BABBH
//#define GT910_ADDR_2829H

#ifdef GT910_ADDR_BABBH
#define GT910_IIC_RADDR 0xBB//0x5E//
#define GT910_IIC_WADDR 0xBA//0x5D//
//#define GT910_IIC_RADDR 0x29 
//#define GT910_IIC_WADDR 0x28 
#else
#define GT910_IIC_RADDR 0x29 
#define GT910_IIC_WADDR 0x28 
#endif


/*INT*/
#define PORT_INT	GPIOG
#define PIN_INT		GPIO_Pin_7
#define SET_INT()	GPIO_SetBits(GPIOG, GPIO_Pin_7);
#define CLR_INT()	GPIO_ResetBits(GPIOG, GPIO_Pin_7);

/*RESET*/
#define PORT_RST	GPIOB
#define PIN_RST		GPIO_Pin_15
#define SET_RST()	GPIO_SetBits(GPIOB, GPIO_Pin_15);
#define CLR_RST()	GPIO_ResetBits(GPIOB, GPIO_Pin_15);

#define GTP_COMPATIBLE_MODE				1


#define GTP_REG_CHIP_TYPE               0x8000

struct  CTOUCH_DATA
{
	uint32_t tid;
	uint32_t px;
	uint32_t py;
	uint32_t ps;
};
struct CNTOUCH_DATA
{
	uint32_t tnum;
	struct CTOUCH_DATA point[GTP_MAX_TOUCH];
	uint32_t key_value;
};


typedef enum
{
	CHIP_TYPE_GT9  = 0,
	CHIP_TYPE_GT9F = 1,
} CHIP_TYPE_T;

struct goodix_ts_data 
{
	uint16_t bak_ref_len;
	uint32_t ref_chk_fs_times;
	uint32_t clk_chk_fs_times;
	CHIP_TYPE_T chip_type;
	uint8_t rqst_processing;
	uint8_t is_950;    
};

#define GTP_FL_FW_BURN              0x00
#define GTP_FL_ESD_RECOVERY         0x01
#define GTP_FL_READ_REPAIR          0x02

#define FW_HEAD_LENGTH               14

#define GTP_ADDR_LENGTH				2
#define FW_SS51_SECTION_LEN          0x2000     // 4 section, each 8k
#define FW_SECTION_LENGTH            0x2000
#define FW_DSP_LENGTH                0x1000
#define FW_DOWNLOAD_LENGTH           0x4000

#define FW_DOWNLOAD_LENGTH           0x4000
#define FW_SS51_SECTION_LEN          0x2000     // 4 section, each 8k
#define FL_PACK_SIZE                 1024
#define GUP_FW_CHK_SIZE              FL_PACK_SIZE    //FL_PACK_SIZE



typedef struct 
{
	uint8_t  hw_info[4];          //hardware info//
	uint8_t  pid[8];              //product id   //
	uint16_t vid;                 //version id   //
}st_fw_head;


// Registers define
#define GTP_READ_COOR_ADDR    0x814E
#define GTP_REG_SLEEP         0x8040
#define GTP_REG_CONFIG_DATA   0x8047
#define GTP_REG_VERSION       0x8140

//GTP reg 
#define GTP_REG_CHIP_TYPE               0x8000
#define GTP_REG_SENSOR_ID				0x814A





// The predefined one is just a sample config, which is not suitable for your tp in most cases.
#define CTP_CFG_GROUP1 {\
	0x00,0x20,0x03,0xE0,0x01,0x05,0x3D,0x00,0x01,0x3F,0x23,0x0F,0x55,0x37,0x03,0x05,\
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x17,0x1A,0x1D,0x14,0x89,0x29,0x0A,0x61,0x5F,\
	0xB2,0x04,0x00,0x00,0x00,0x00,0x02,0x1D,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,\
	0x00,0x00,0x00,0x53,0x85,0x94,0xC5,0x02,0x08,0x00,0x00,0x04,0x8B,0x57,0x00,0x7F,\
	0x5F,0x00,0x74,0x69,0x00,0x6B,0x73,0x00,0x62,0x7F,0x00,0x62,0x00,0x00,0x00,0x00,\
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
	0x1A,0x18,0x16,0x14,0x12,0x10,0x0E,0x0C,0x0A,0x08,0x00,0x00,0x00,0x00,0x00,0x00,\
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x2A,0x29,\
	0x28,0x24,0x22,0x20,0x1F,0x1E,0x1D,0x0E,0x0C,0x0A,0x08,0x06,0x05,0x04,0x02,0x00,\
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
	0x00,0x00,0xDF,0x01\
}


ErrorStatus GT9XX_Initial(void);
void gt910_isr(void);



#endif

